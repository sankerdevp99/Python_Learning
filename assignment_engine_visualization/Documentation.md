# DISCRETE EVENT SIMULATOR 


## Introduction:

The working of discrete event simulator is supported by a total of ten Python files, two Excel sheets , one yaml file and one json file. After generating the schedules, execute the discrete event simulator by running the main.py file. Detailed descriptions of all the files will be provided to ensure clarity and understanding of their respective roles in the simulation process.

## Dependencies:

* Python pandas library

* Python matplotlib library

* yaml

## Usage:

To run the code and customize its behavior, follow these steps:

* Open the main.py file in a text editor or integrated development environment (IDE).

* In the main.py file, two dataframes are utilized, which are read from Excel sheets. The Excel file, named "nodes_junctions.xlsx", contains information about the names and locations of zones and junctions within the mining area. The file also provide the connectivity information of nodes and junctions.

* The "distance_matrix.xlsx" file is an Excel spreadsheet that contains a dataframe representing the distances between various nodes and junctions within the mining area

* A map is generated by utilizing the location information available in the "nodes_junctions" dataframe.

* The world is created by defining the fundamental parameters of trucks and shovels.

* Parking stations, loading stations, and unloading stations are designated as buildings and incorporated into the world.

* Trucks are instantiated by their initial starting location within the world with the parameters provied in the Common_Properties file

* The map locations are given to the buildings created in the world.

* To simulate the world using the discrete event simulator, you can run the "main.py" file through a Python interpreter. 



## Main.py


* To initiate the discrete event simulator, execute the "main.py" file utilizing a Python interpreter. Further details about the main.py file can be found in the usage section.

## Map.py

* Nodes are generated, each having a unique node_id, location, and connectivity information.

* The node objects created are stored in the node_list attribute of the Map class.

* The function calculate distance returns the distance between any two connected nodes.


## Buildings.py

* Loading stations and unloading stations can be created using the functionality provided by the shovel class.

* Additionally, if needed, a parking lot can be created to accommodate trucks in the beginning.

## World.py

* The World class defines the common parameters used in the simulation, such as truck velocity and shovel rates.

* The World class also serves as a container to store the buildings and trucks created in the simulation. This allows for easy access and management of their locations on the map within the context of the World.

* To simulate the world, the Taskmaster function from the World class is invoked. This function utilizes the schedule created by the time space networks and assign to each truck. This helps visualize and test the working of the DES.

## Vehicles.py

* The trucks in the simulation can be in one of four states: Stop, Travel, Load, and Unload.

### step_sim() function:

* This function operates based on the provided schedule.

* If the state of a truck is "stop," it triggers the guard function to obtain a new schedule for that particular truck.

* If the state of the truck is either "travel," "load," or "unload," the simulator invokes the corresponding functions to handle the specific tasks associated with each state.

### guard() function:

* Guard function used to obtain the new schedule created by the taskmaster

* Upon receiving a schedule to travel, the truck calls the calculate_distance() function to determine the distance between its current node and the goal node, which is then stored as the "dist_remaining" variable.

* The state and parameters of the truck get changed from the guard function based on the newly generated schedule.


### travel() function:

* Ensures that the current vehicle can only move if it maintains a minimum distance to the vehicle moving ahead.

* Function updates the dist_remaining variable for a traveling truck based on its state in each discrete time step.

* Truck's journey ends and its state is updated when the distance remaining reaches below a specified threshold, and then triggers the guard function.


### load() function:

* The material available in the truck increases while the material available at the location decreases at each discrete time step, in accordance with the shovel rate.

* Calculates the estimated time required to complete the loading process and determines the availability of the loading station thereafter.

* If the amount of material at the loading station becomes empty (less than a threshold value), the loading station will be indefinitely unavailable.

* Once the amount of material in the truck reaches the maximum bed capacity, the loading process is completed, and the guard function will be triggered.

### unload() function:

* The material available in the truck decreases while the material available at the location increases at each discrete time step, in accordance with the shovel rate.

* calculates the estimated time required to complete the unloading process and determines the availability of the loading station thereafter.

 * If the amount of material at the loading station reaches the requirement of that station, the unloading station will be indefinitely unavailable.

* Once the amount of material in the truck becomes zero, the unloading process is completed, and the guard function will be triggered.


## Map_Search_Setup.py

* The "mapsearch.py" file contains function required to extract the path to next assigned loading/unloading station as per the schedule.

## TaskMaster.py

* This file is responsible for assigning the schedules to each truck, based on the schedules from output.json file.

* Each truck will be responsible to carry a schedule from the schedules list in the json file

* From the schedule each truck has to find it's next goal location (loading/unloading station), path to reach goal location and the distance to travel. Based on the informatin world will be simulated in the discrete event simulator 


## Visualizations.py

* The functions visualize_map(), visualize_world_first_time(), and visualize_trucks_first_time() plot the map, connectivity, and buildings as nodes, along with their parameters.

* The visualize_world_update() and visualize_trucks_update() functions are called at discrete time intervals to update the existing plot, ensuring that it reflects the latest changes in the world and the trucks' status.




 

 
